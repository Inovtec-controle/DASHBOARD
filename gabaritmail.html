<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Bo√Æte √† Mails ‚Äì Nettoyage Pro</title>

  <!-- iPhone friendly -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#16a34a">

  <!-- Police Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-main: #f3f4f6;
      --bg-card: #ffffff;
      --border-soft: #e5e7eb;
      --text-main: #0f172a;
      --text-muted: #6b7280;
      --primary: #16a34a;
      --primary-soft: #dcfce7;
      --primary-strong: #15803d;
      --accent: #0f766e;
      --danger: #dc2626;
      --radius-lg: 16px;
      --shadow-soft: 0 10px 25px rgba(15, 23, 42, 0.08);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: radial-gradient(circle at top, #e5f9ed 0, #f3f4f6 45%, #e5f9ed 100%);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: stretch;
    }

    .app-shell {
      width: 100%;
      max-width: 1120px;
      margin: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    header.app-header {
      background: linear-gradient(135deg, #16a34a, #0f766e);
      border-radius: 24px;
      padding: 16px 18px;
      color: white;
      box-shadow: var(--shadow-soft);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .header-main {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .app-title {
      font-size: 1.25rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .app-title-pill {
      background: rgba(15, 23, 42, 0.15);
      border-radius: 999px;
      padding: 2px 10px;
      font-size: 0.72rem;
      font-weight: 500;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .app-subtitle {
      font-size: 0.85rem;
      color: rgba(241, 245, 249, 0.9);
    }

    .header-actions {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .chip {
      background: rgba(15, 23, 42, 0.14);
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 0.75rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
    }

    .chip-icon {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #bbf7d0;
    }

    main.app-main {
      display: grid;
      grid-template-columns: minmax(0, 0.95fr) minmax(0, 1.4fr);
      gap: 14px;
      align-items: stretch;
    }

    .card {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
      padding: 14px 14px 12px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      display: flex;
      flex-direction: column;
      gap: 10px;
      min-height: 0;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .card-title {
      font-size: 0.95rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .card-title-badge {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      padding: 2px 8px;
      border-radius: 999px;
      background: var(--primary-soft);
      color: var(--primary-strong);
      font-weight: 600;
    }

    .card-subtitle {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .field-label {
      font-size: 0.75rem;
      font-weight: 500;
      color: var(--text-muted);
      margin-bottom: 3px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 4px;
    }

    .field-label span.hint {
      font-size: 0.7rem;
      color: #9ca3af;
    }

    .field-group {
      display: flex;
      flex-direction: column;
      margin-bottom: 6px;
    }

    .input, .select, textarea {
      width: 100%;
      border-radius: 10px;
      border: 1px solid var(--border-soft);
      font-family: inherit;
      font-size: 0.8rem;
      padding: 7px 9px;
      outline: none;
      background: #f9fafb;
      transition: border-color 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    .input:focus, .select:focus, textarea:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 1px rgba(22, 163, 74, 0.25);
      background: #ffffff;
    }

    textarea {
      resize: vertical;
      min-height: 140px;
      max-height: 320px;
      line-height: 1.4;
      white-space: pre-wrap;
    }

    .input-row {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .input-row > * {
      flex: 1;
    }

    .tag {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border-radius: 999px;
      padding: 3px 9px;
      font-size: 0.7rem;
      background: #e5f9ed;
      color: #166534;
      border: 1px solid #bbf7d0;
    }

    .tag-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #16a34a;
    }

    .toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
      justify-content: flex-end;
      margin-top: 4px;
    }

    .btn {
      border-radius: 999px;
      border: 1px solid transparent;
      font-size: 0.75rem;
      font-weight: 500;
      padding: 6px 10px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      background: #e5e7eb;
      color: #111827;
      transition: background 0.15s ease, transform 0.07s ease, box-shadow 0.15s ease, border-color 0.15s ease;
      white-space: nowrap;
    }

    .btn span.icon {
      font-size: 0.9em;
    }

    .btn:hover {
      background: #d1d5db;
      transform: translateY(-1px);
      box-shadow: 0 7px 18px rgba(15, 23, 42, 0.14);
    }

    .btn-primary {
      background: linear-gradient(135deg, #16a34a, #0f766e);
      color: white;
      border-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 10px 20px rgba(22, 163, 74, 0.55);
    }

    .btn-primary:hover {
      background: linear-gradient(135deg, #15803d, #0e7490);
    }

    .btn-ghost {
      background: transparent;
      border-color: rgba(148, 163, 184, 0.6);
      color: #4b5563;
    }

    .btn-ghost:hover {
      background: #f3f4f6;
    }

    .btn-danger {
      background: #fee2e2;
      color: #b91c1c;
      border-color: #fecaca;
    }

    .btn-danger:hover {
      background: #fecaca;
    }

    .btn-xs {
      font-size: 0.7rem;
      padding: 4px 7px;
    }

    .template-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 2px;
      overflow-y: auto;
      padding-right: 2px;
      max-height: 470px;
    }

    .template-item {
      border-radius: 12px;
      padding: 7px 9px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      display: flex;
      flex-direction: column;
      gap: 2px;
      cursor: pointer;
      transition: background 0.12s ease, border-color 0.12s ease, transform 0.06s ease;
      position: relative;
    }

    .template-item:hover {
      background: #eef2ff;
      border-color: #a5b4fc;
      transform: translateY(-0.5px);
    }

    .template-item.selected {
      border-color: #16a34a;
      background: #ecfdf5;
      box-shadow: 0 0 0 1px rgba(22, 163, 74, 0.4);
    }

    .template-name-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }

    .template-name {
      font-size: 0.8rem;
      font-weight: 600;
      color: #111827;
    }

    .template-category {
      font-size: 0.65rem;
      padding: 1px 6px;
      border-radius: 999px;
      background: #e5f9ed;
      color: #166534;
      border: 1px solid #bbf7d0;
      white-space: nowrap;
    }

    .template-subject {
      font-size: 0.75rem;
      color: #4b5563;
    }

    .template-meta {
      font-size: 0.68rem;
      color: #9ca3af;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      margin-top: 1px;
    }

    .pill-mini {
      font-size: 0.65rem;
      padding: 1px 7px;
      border-radius: 999px;
      background: #e5e7eb;
      color: #374151;
    }

    .search-row {
      display: flex;
      gap: 6px;
      align-items: center;
      margin-top: 4px;
      margin-bottom: 2px;
    }

    .search-row .input {
      font-size: 0.78rem;
      padding-left: 26px;
      position: relative;
    }

    .search-wrapper {
      position: relative;
      flex: 1;
    }

    .search-icon {
      position: absolute;
      left: 8px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 0.8rem;
      color: #9ca3af;
    }

    .select {
      font-size: 0.78rem;
      background-image: linear-gradient(45deg, transparent 50%, #6b7280 50%), linear-gradient(135deg, #6b7280 50%, transparent 50%);
      background-position: calc(100% - 11px) calc(50% - 4px), calc(100% - 6px) calc(50% - 4px);
      background-size: 5px 5px, 5px 5px;
      background-repeat: no-repeat;
      padding-right: 24px;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 2px;
    }

    .pill-help {
      font-size: 0.7rem;
      color: var(--text-muted);
      padding: 6px 8px;
      border-radius: 12px;
      background: #f9fafb;
      border: 1px dashed #d1d5db;
    }

    .pill-help strong {
      font-weight: 600;
      color: #111827;
    }

    .variables-list {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-top: 2px;
    }

    .var-tag {
      font-size: 0.7rem;
      padding: 3px 8px;
      border-radius: 999px;
      background: #eef2ff;
      color: #4338ca;
      border: 1px solid #c7d2fe;
      cursor: pointer;
    }

    .var-tag:hover {
      background: #e0e7ff;
    }

    .copy-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      justify-content: flex-end;
      margin-top: 1px;
    }

    .status-bar {
      font-size: 0.68rem;
      color: #6b7280;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      margin-top: 2px;
    }

    .status-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
    }

    .toast {
      position: fixed;
      bottom: 16px;
      left: 50%;
      transform: translateX(-50%);
      background: #16a34a;
      color: white;
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 0.78rem;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 15px 30px rgba(22, 163, 74, 0.6);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.15s ease, transform 0.15s ease;
      z-index: 30;
    }

    .toast.visible {
      opacity: 1;
      pointer-events: auto;
      transform: translate(-50%, -4px);
    }

    .toast-icon {
      font-size: 1rem;
    }

    footer.app-footer {
      font-size: 0.7rem;
      color: #9ca3af;
      text-align: right;
      padding: 0 2px 2px;
    }

    footer.app-footer span {
      color: #16a34a;
      font-weight: 600;
    }

    @media (max-width: 900px) {
      main.app-main {
        grid-template-columns: 1fr;
      }
      .card {
        padding: 12px;
      }
      header.app-header {
        flex-direction: column;
        align-items: flex-start;
      }
      .header-actions {
        width: 100%;
        justify-content: space-between;
      }
    }

    @media (max-width: 600px) {
      .app-shell {
        margin: 10px;
      }
      .app-title {
        font-size: 1.1rem;
      }
      header.app-header {
        padding: 12px 12px 10px;
      }
      main.app-main {
        gap: 10px;
      }
      .template-list {
        max-height: 250px;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <div class="header-main">
        <div class="app-title">
          Bo√Æte √† Mails ‚Äì Nettoyage Pro
          <span class="app-title-pill">Kit mod√®les</span>
        </div>
        <div class="app-subtitle">
          Centralise tes e-mails type : devis, relances, r√©clamations, consignes agents‚Ä¶ et copie en 1 clic.
        </div>
      </div>
      <div class="header-actions">
        <div class="chip">
          <span class="chip-icon"></span>
          <span>Nettoyage pro & multisites</span>
        </div>
        <div class="chip">
          <span class="chip-icon"></span>
          <span>Sauvegarde locale automatique</span>
        </div>
      </div>
    </header>

    <main class="app-main">
      <!-- Colonne gauche : liste des mod√®les -->
      <section class="card" id="templates-card">
        <div class="card-header">
          <div>
            <div class="card-title">
              Mod√®les d‚Äôe-mails
              <span class="card-title-badge">Liste</span>
            </div>
            <div class="card-subtitle">
              S√©lectionne un mod√®le ou cr√©e le tien. Tu peux filtrer par type de situation.
            </div>
          </div>
          <button class="btn btn-primary btn-xs" id="btnNewTemplate">
            <span class="icon">Ôºã</span> Nouveau mod√®le
          </button>
        </div>

        <div class="search-row">
          <div class="search-wrapper">
            <span class="search-icon">üîç</span>
            <input type="text" class="input" id="searchInput" placeholder="Rechercher (nom, sujet, mots-cl√©s)‚Ä¶">
          </div>
          <select class="select" id="filterCategory">
            <option value="all">Tout type</option>
            <option value="Client">Clients</option>
            <option value="Devis">Devis / propositions</option>
            <option value="Relance">Relances / impay√©s</option>
            <option value="R√©clamation">R√©clamations</option>
            <option value="Agents">Agents / interne</option>
            <option value="Autre">Autres</option>
          </select>
        </div>

        <div class="pill-row">
          <div class="pill-help">
            <strong>Astuce :</strong> cr√©e d‚Äôabord 1 mod√®le par situation fr√©quente (nouveau client, devis, relance, contr√¥le qualit√©‚Ä¶).
          </div>
        </div>

        <div class="template-list" id="templateList"></div>
      </section>

      <!-- Colonne droite : √©dition du mod√®le -->
      <section class="card" id="editor-card">
        <div class="card-header">
          <div>
            <div class="card-title">
              √âditeur de mod√®le
              <span class="card-title-badge">D√©tail</span>
            </div>
            <div class="card-subtitle" id="editorHint">
              S√©lectionne un mod√®le √† gauche ou cr√©e-en un nouveau.
            </div>
          </div>
          <div class="toolbar">
            <button class="btn btn-ghost btn-xs" id="btnDuplicate" disabled>
              <span class="icon">üìÑ</span> Dupliquer
            </button>
            <button class="btn btn-danger btn-xs" id="btnDelete" disabled>
              <span class="icon">üóë</span> Supprimer
            </button>
          </div>
        </div>

        <div class="field-group">
          <label class="field-label">
            Nom du mod√®le
            <span class="hint">Ex : ‚ÄúDevis r√©sidence seniors ‚Äì 1√®re proposition‚Äù</span>
          </label>
          <input type="text" class="input" id="fieldName" placeholder="Nom interne du mod√®le (visible seulement par toi)">
        </div>

        <div class="field-group">
          <div class="input-row">
            <div>
              <label class="field-label">
                Cat√©gorie
                <span class="hint">Pour mieux filtrer</span>
              </label>
              <select class="select" id="fieldCategory">
                <option value="Client">Client</option>
                <option value="Devis">Devis / Proposition</option>
                <option value="Relance">Relance / Impay√©</option>
                <option value="R√©clamation">R√©clamation</option>
                <option value="Agents">Agents / Interne</option>
                <option value="Autre">Autre</option>
              </select>
            </div>
            <div>
              <label class="field-label">
                Objet
                <span class="hint">Ligne objet de l‚Äôe-mail</span>
              </label>
              <input type="text" class="input" id="fieldSubject" placeholder="Objet de l‚Äôe-mail‚Ä¶">
            </div>
          </div>
        </div>

        <div class="field-group">
          <label class="field-label">
            Corps du message
            <span class="hint">Tu peux utiliser les variables ci-dessous</span>
          </label>
          <textarea id="fieldBody" placeholder="Bonjour {CIVILITE} {NOM_CLIENT},&#10;&#10;Je vous contacte au sujet de‚Ä¶"></textarea>
        </div>

        <div class="field-group">
          <label class="field-label">
            Variables utiles
            <span class="hint">Cliquer pour ins√©rer</span>
          </label>
          <div class="variables-list" id="variablesList">
            <button type="button" class="var-tag" data-var="{CIVILITE} {NOM_CLIENT}">Client</button>
            <button type="button" class="var-tag" data-var="{NOM_SITE}">Nom du site</button>
            <button type="button" class="var-tag" data-var="{ADRESSE_SITE}">Adresse du site</button>
            <button type="button" class="var-tag" data-var="{TYPE_PRESTATION}">Type de prestation</button>
            <button type="button" class="var-tag" data-var="{FREQUENCE}">Fr√©quence</button>
            <button type="button" class="var-tag" data-var="{MONTANT_HT}">Montant HT</button>
            <button type="button" class="var-tag" data-var="{MONTANT_TTC}">Montant TTC</button>
            <button type="button" class="var-tag" data-var="{DATE_INTERVENTION}">Date intervention</button>
            <button type="button" class="var-tag" data-var="{PLAGE_HORAIRE}">Plage horaire</button>
            <button type="button" class="var-tag" data-var="{NOM_AGENT}">Nom de l‚Äôagent</button>
          </div>
        </div>

        <div class="copy-row">
          <button class="btn btn-ghost btn-xs" id="btnCopySubject">
            <span class="icon">üìß</span> Copier objet
          </button>
          <button class="btn btn-ghost btn-xs" id="btnCopyBody">
            <span class="icon">üìã</span> Copier message
          </button>
          <button class="btn btn-primary btn-xs" id="btnCopyAll">
            <span class="icon">‚ö°</span> Copier e-mail complet
          </button>
        </div>

        <div class="toolbar">
          <button class="btn btn-primary" id="btnSave">
            <span class="icon">üíæ</span> Enregistrer le mod√®le
          </button>
          <button class="btn btn-ghost" id="btnReset">
            <span class="icon">‚Ü∫</span> Effacer le formulaire
          </button>
        </div>

        <div class="status-bar">
          <div>
            <span class="status-dot"></span>
            <span id="statusText">Aucun mod√®le s√©lectionn√©.</span>
          </div>
          <div id="countText">0 mod√®le</div>
        </div>
      </section>
    </main>

    <footer class="app-footer">
      Bo√Æte √† mails <span>Nettoyage Pro</span> ‚Äì mod√®les enregistr√©s uniquement sur ton appareil.
    </footer>
  </div>

  <div class="toast" id="toast">
    <span class="toast-icon">‚úÖ</span>
    <span id="toastMessage">Copi√© dans le presse-papiers</span>
  </div>

  <script>
    const STORAGE_KEY = 'mailTemplatesNettoyagePro_v1';

    const defaultTemplates = [
      {
        id: 'prospect-devis-1',
        name: 'Premier contact ‚Äì Demande d‚Äôinfos',
        category: 'Client',
        subject: 'Votre demande de prestation de nettoyage ‚Äì {NOM_SITE}',
        body:
`Bonjour {CIVILITE} {NOM_CLIENT},

Je fais suite √† votre demande concernant la prestation de nettoyage pour {NOM_SITE} situ√© {ADRESSE_SITE}.

Afin de vous proposer un devis pr√©cis et adapt√© √† vos besoins, pourriez-vous me confirmer :
‚Ä¢ Le type de locaux : {TYPE_PRESTATION} (bureaux, r√©sidence, parties communes‚Ä¶)
‚Ä¢ La fr√©quence souhait√©e : {FREQUENCE}
‚Ä¢ Les jours / cr√©neaux horaires possibles : {PLAGE_HORAIRE}
‚Ä¢ Les √©ventuels points sp√©cifiques (vitres, parking, zones techniques, etc.)

D√®s r√©ception de vos √©l√©ments, je vous adresse une proposition d√©taill√©e.

Restant √† votre disposition,
Bien cordialement,

{VOTRE_NOM}
{VOTRE_STRUCTURE}
{VOS_COORDONNEES}`
      },
      {
        id: 'devis-envoi-1',
        name: 'Envoi de devis ‚Äì Locaux professionnels',
        category: 'Devis',
        subject: 'Envoi de notre devis pour {NOM_SITE}',
        body:
`Bonjour {CIVILITE} {NOM_CLIENT},

Comme convenu, vous trouverez ci-joint notre devis pour la prestation de nettoyage de {NOM_SITE} ({ADRESSE_SITE}).

D√©tail de notre proposition :
‚Ä¢ Type de prestation : {TYPE_PRESTATION}
‚Ä¢ Fr√©quence : {FREQUENCE}
‚Ä¢ Jours et horaires d‚Äôintervention : {PLAGE_HORAIRE}
‚Ä¢ Montant HT : {MONTANT_HT}
‚Ä¢ Montant TTC : {MONTANT_TTC}

Ce tarif inclut :
‚Ä¢ Les produits et mat√©riels n√©cessaires
‚Ä¢ Le remplacement de l‚Äôagent en cas d‚Äôabsence
‚Ä¢ Le suivi qualit√© avec visites sur site et ajustements si besoin

Je reste disponible pour √©changer sur ce devis ou adapter certains points selon vos contraintes.

Dans l‚Äôattente de votre retour,
Cordialement,

{VOTRE_NOM}
{VOTRE_STRUCTURE}
{VOS_COORDONNEES}`
      },
      {
        id: 'relance-devis-1',
        name: 'Relance devis non sign√©',
        category: 'Relance',
        subject: 'Relance ‚Äì Devis nettoyage {NOM_SITE}',
        body:
`Bonjour {CIVILITE} {NOM_CLIENT},

Je me permets de revenir vers vous concernant le devis pour la prestation de nettoyage de {NOM_SITE}, envoy√© le {DATE_ENVOI_DEVIS}.

Avez-vous pu en prendre connaissance ?
Souhaitez-vous que nous en rediscutions ensemble ou que je vous propose une adaptation (fr√©quence, horaires, p√©rim√®tre de prestation‚Ä¶) ?

Je reste bien entendu disponible par retour de mail ou par t√©l√©phone au {VOTRE_TELEPHONE}.

Bien cordialement,

{VOTRE_NOM}
{VOTRE_STRUCTURE}
{VOS_COORDONNEES}`
      },
      {
        id: 'reclamation-client-1',
        name: 'R√©ponse r√©clamation client ‚Äì Excuses + action',
        category: 'R√©clamation',
        subject: 'Suite √† votre retour concernant {NOM_SITE}',
        body:
`Bonjour {CIVILITE} {NOM_CLIENT},

Je vous remercie pour votre retour et je suis d√©sol√©(e) de la g√™ne occasionn√©e concernant la prestation de nettoyage sur {NOM_SITE}, notamment sur le point suivant :
‚Ä¢ {DETAIL_RECLAMATION}

Apr√®s v√©rification, voici les actions mises en place :
‚Ä¢ Rappel des consignes √† l‚Äôagent {NOM_AGENT}
‚Ä¢ Contr√¥le qualit√© renforc√© lors des prochaines interventions
‚Ä¢ Ajustement de la check-list pour √©viter que la situation ne se reproduise

Je passerai sur site le {DATE_INTERVENTION} afin de v√©rifier avec vous que tout est conforme √† vos attentes.

Merci encore pour votre vigilance,
Bien cordialement,

{VOTRE_NOM}
{VOTRE_STRUCTURE}
{VOS_COORDONNEES}`
      },
      {
        id: 'consignes-agent-1',
        name: 'Consignes intervention √† un agent',
        category: 'Agents',
        subject: 'Nouvelles consignes ‚Äì Intervention {NOM_SITE}',
        body:
`Bonjour {NOM_AGENT},

Tu interviens sur le site suivant :
‚Ä¢ Site : {NOM_SITE}
‚Ä¢ Adresse : {ADRESSE_SITE}
‚Ä¢ Type de prestation : {TYPE_PRESTATION}
‚Ä¢ Fr√©quence : {FREQUENCE}
‚Ä¢ Horaires : {PLAGE_HORAIRE}

Points de vigilance :
‚Ä¢ {POINTS_VIGILANCE}
‚Ä¢ Signaler imm√©diatement toute anomalie (casse, porte ouverte, intrusion‚Ä¶)
‚Ä¢ Envoyer une photo apr√®s la premi√®re prestation pour validation

Merci de me confirmer r√©ception de ce message et de m‚Äôindiquer si tu as des questions.

Bonne intervention,
{VOTRE_NOM}`
      },
      {
        id: 'compte-rendu-cq-1',
        name: 'Compte rendu contr√¥le qualit√©',
        category: 'Client',
        subject: 'Compte rendu de contr√¥le qualit√© ‚Äì {NOM_SITE}',
        body:
`Bonjour {CIVILITE} {NOM_CLIENT},

Je vous fais un retour suite au contr√¥le qualit√© r√©alis√© sur {NOM_SITE} le {DATE_INTERVENTION}.

Synth√®se :
‚Ä¢ Niveau global : {NIVEAU_GLOBAL} (Conforme / √Ä am√©liorer / Non conforme)
‚Ä¢ Points positifs : {POINTS_POSITIFS}
‚Ä¢ Points √† am√©liorer : {POINTS_A_AMELIORER}

Actions mises en place :
‚Ä¢ Rappel des consignes √† {NOM_AGENT}
‚Ä¢ Ajustement de la check-list d‚Äôintervention
‚Ä¢ Nouveau contr√¥le pr√©vu le {DATE_PROCHAIN_CONTROLE}

Je reste bien s√ªr √† votre disposition si vous souhaitez que l‚Äôon en parle plus en d√©tail.

Cordialement,

{VOTRE_NOM}
{VOTRE_STRUCTURE}
{VOS_COORDONNEES}`
      },

      /* ====== 10 NOUVEAUX MOD√àLES ====== */

      {
        id: 'facture-impayee-1',
        name: 'Relance facture impay√©e ‚Äì 1√®re relance',
        category: 'Relance',
        subject: 'Relance facture n¬∞{NUM_FACTURE} ‚Äì {NOM_SITE}',
        body:
`Bonjour {CIVILITE} {NOM_CLIENT},

Je me permets de vous contacter au sujet de la facture n¬∞{NUM_FACTURE} concernant la prestation de nettoyage de {NOM_SITE}, d‚Äôun montant de {MONTANT_TTC}, arriv√©e √† √©ch√©ance le {DATE_ECHEANCE}.

√Ä ce jour, sauf erreur de notre part, cette facture appara√Æt toujours comme non r√©gl√©e.

Je vous remercie par avance si le r√®glement a d√©j√† √©t√© effectu√© de ne pas tenir compte de ce message.
Dans le cas contraire, pouvez-vous m‚Äôindiquer la date de r√®glement pr√©vue ou si vous souhaitez un √©chelonnement ?

Je reste bien s√ªr √† votre disposition en cas de question.

Cordialement,

{VOTRE_NOM}
{VOTRE_STRUCTURE}
{VOS_COORDONNEES}
RIB : {VOS_COORDONNEES_BANCAIRES}`
      },
      {
        id: 'facture-impayee-2',
        name: 'Relance facture impay√©e ‚Äì 2√®me relance',
        category: 'Relance',
        subject: 'Deuxi√®me relance facture n¬∞{NUM_FACTURE} ‚Äì {NOM_SITE}',
        body:
`Bonjour {CIVILITE} {NOM_CLIENT},

Sauf erreur de notre part, nous n‚Äôavons pas encore re√ßu le r√®glement de la facture n¬∞{NUM_FACTURE}, d‚Äôun montant de {MONTANT_TTC}, pour la prestation de nettoyage r√©alis√©e sur {NOM_SITE} (p√©riode : {PERIODE_FACTUREE}).

Afin d‚Äô√©viter toute suspension de la prestation, nous vous remercions de bien vouloir proc√©der au r√®glement sous {DELAI_REGLEMENT} jours ou de nous contacter pour convenir d‚Äôune solution (√©chelonnement, difficult√© ponctuelle, etc.).

Dans l‚Äôattente de votre retour,
Cordialement,

{VOTRE_NOM}
{VOTRE_STRUCTURE}
{VOS_COORDONNEES}`
      },
      {
        id: 'demarrage-presta-1',
        name: 'Confirmation d√©marrage prestation',
        category: 'Client',
        subject: 'D√©marrage de la prestation de nettoyage ‚Äì {NOM_SITE}',
        body:
`Bonjour {CIVILITE} {NOM_CLIENT},

Je vous confirme la mise en place de la prestation de nettoyage pour {NOM_SITE} √† compter du {DATE_DEMARRAGE}.

D√©tail de l‚Äôorganisation :
‚Ä¢ Site : {NOM_SITE} ‚Äì {ADRESSE_SITE}
‚Ä¢ Type de prestation : {TYPE_PRESTATION}
‚Ä¢ Fr√©quence : {FREQUENCE}
‚Ä¢ Jours et horaires d‚Äôintervention : {PLAGE_HORAIRE}
‚Ä¢ Agent en charge du site : {NOM_AGENT}

Un premier point sera r√©alis√© apr√®s les {NB_PRESTATIONS} premi√®res interventions afin de v√©rifier votre satisfaction et ajuster si n√©cessaire.

Restant √† votre disposition,
Bien cordialement,

{VOTRE_NOM}
{VOTRE_STRUCTURE}
{VOS_COORDONNEES}`
      },
      {
        id: 'suspension-presta-1',
        name: 'Suspension / r√©duction de prestation',
        category: 'Client',
        subject: 'Organisation des prestations de nettoyage ‚Äì {NOM_SITE}',
        body:
`Bonjour {CIVILITE} {NOM_CLIENT},

Suite √† nos √©changes concernant la p√©riode de fermeture / travaux / cong√©s sur {NOM_SITE}, je vous confirme l‚Äôorganisation suivante :

‚Ä¢ P√©riode concern√©e : du {DATE_DEBUT_SUSPENSION} au {DATE_FIN_SUSPENSION}
‚Ä¢ Adaptation de la prestation :
  - {DETAIL_ADAPTATION} (suspension totale, r√©duction de fr√©quence, simple maintien des points sensibles, etc.)

Les interventions reprendront normalement √† partir du {DATE_REPRISE}, aux jours et horaires habituels : {PLAGE_HORAIRE}.

N‚Äôh√©sitez pas √† me signaler si vous souhaitez une visite de reprise ou un nettoyage renforc√© avant r√©ouverture.

Cordialement,

{VOTRE_NOM}
{VOTRE_STRUCTURE}
{VOS_COORDONNEES}`
      },
      {
        id: 'changement-agent-1',
        name: 'Information changement d‚Äôagent',
        category: 'Client',
        subject: 'Changement d‚Äôagent de nettoyage ‚Äì {NOM_SITE}',
        body:
`Bonjour {CIVILITE} {NOM_CLIENT},

Je vous informe qu‚Äô√† compter du {DATE_CHANGEMENT}, c‚Äôest {NOM_NOUVEL_AGENT} qui interviendra sur votre site {NOM_SITE} en remplacement de {ANCIEN_NOM_AGENT}.

Organisation maintenue :
‚Ä¢ Jours et horaires : {PLAGE_HORAIRE}
‚Ä¢ P√©rim√®tre de prestation : {TYPE_PRESTATION} (inchang√©)

J‚Äôai effectu√© un passage de consignes complet avec {NOM_NOUVEL_AGENT} afin d‚Äôassurer la continuit√© de la qualit√© sur votre site. Un contr√¥le qualit√© sera r√©alis√© apr√®s les premi√®res interventions pour v√©rifier que tout est conforme √† vos attentes.

Je reste √©videmment disponible pour tout retour.

Bien cordialement,

{VOTRE_NOM}
{VOTRE_STRUCTURE}
{VOS_COORDONNEES}`
      },
      {
        id: 'rappel-procedure-agent-1',
        name: 'Rappel proc√©dure cl√©s / badge',
        category: 'Agents',
        subject: 'Rappel proc√©dure cl√©s et badge ‚Äì {NOM_SITE}',
        body:
`Bonjour {NOM_AGENT},

Petit rappel concernant la proc√©dure cl√©s / badge pour le site {NOM_SITE} ({ADRESSE_SITE}) :

‚Ä¢ R√©cup√©rer les cl√©s / badge : {LIEU_RECUPERATION}
‚Ä¢ Les d√©poser imp√©rativement en fin d‚Äôintervention √† : {LIEU_DEPOT}
‚Ä¢ En cas de perte ou d‚Äôoubli : pr√©venir imm√©diatement {CONTACT_EN_CAS_PROBLEME} au {NUMERO_TELEPHONE}

Merci √©galement de :
‚Ä¢ V√©rifier que toutes les portes soient ferm√©es √† cl√© avant de quitter le site
‚Ä¢ V√©rifier que l‚Äôalarme est bien remise si n√©cessaire

Merci d‚Äôaccuser r√©ception de ce message.

Bonne journ√©e,
{VOTRE_NOM}`
      },
      {
        id: 'retard-agent-1',
        name: 'Rappel ponctualit√© / retards',
        category: 'Agents',
        subject: 'Retards sur les interventions ‚Äì {NOM_SITE}',
        body:
`Bonjour {NOM_AGENT},

Je reviens vers toi concernant quelques retards constat√©s sur les derni√®res interventions du site {NOM_SITE}.

Pour le client, le respect des horaires est tr√®s important, notamment parce que :
‚Ä¢ {RAISON_IMPORTANCE_HORAIRES} (ouverture bureaux, pr√©sence r√©sidents, etc.)

Merci de bien veiller √† :
‚Ä¢ Arriver pour {HEURE_ARRIVEE_SOUHAITEE}
‚Ä¢ Me pr√©venir en amont si tu sais que tu risques d‚Äô√™tre en retard (bouchons, probl√®me transport, etc.)

L‚Äôobjectif est de maintenir une bonne relation de confiance avec le client. Si tu rencontres des difficult√©s d‚Äôorganisation, dis-le-moi, on regardera ensemble comment adapter.

Merci pour ta compr√©hension,
{VOTRE_NOM}`
      },
      {
        id: 'prise-rdv-visite-1',
        name: 'Prise de rendez-vous pour visite de site',
        category: 'Client',
        subject: 'Proposition de rendez-vous pour visite de vos locaux',
        body:
`Bonjour {CIVILITE} {NOM_CLIENT},

Afin de vous proposer une offre de nettoyage adapt√©e √† vos besoins pour {NOM_SITE}, je vous propose que nous r√©alisions une visite de vos locaux.

Je peux me rendre disponible :
‚Ä¢ {CRENEAU_1}
‚Ä¢ {CRENEAU_2}
‚Ä¢ {CRENEAU_3}

La visite dure g√©n√©ralement entre 20 et 30 minutes et nous permet de :
‚Ä¢ Valider ensemble le p√©rim√®tre de prestation
‚Ä¢ Identifier les points sensibles
‚Ä¢ D√©finir la fr√©quence la plus adapt√©e

N‚Äôh√©sitez pas √† me dire si un autre cr√©neau vous conviendrait mieux.

Dans l‚Äôattente de votre retour,
Cordialement,

{VOTRE_NOM}
{VOTRE_STRUCTURE}
{VOS_COORDONNEES}`
      },
      {
        id: 'remerciement-mission-ponctuelle-1',
        name: 'Remerciement fin de mission ponctuelle',
        category: 'Client',
        subject: 'Fin de prestation ponctuelle ‚Äì {NOM_SITE}',
        body:
`Bonjour {CIVILITE} {NOM_CLIENT},

Notre prestation ponctuelle de nettoyage sur {NOM_SITE} (p√©riode : {PERIODE_PRESTATION}) est d√©sormais termin√©e.

Je vous remercie pour votre confiance.
N‚Äôh√©sitez pas √† me faire un retour sur votre niveau de satisfaction et les points √† am√©liorer, cela nous permet d‚Äôajuster nos futures interventions.

Si vous avez besoin d‚Äôune nouvelle intervention (remise en √©tat, vitrerie, nettoyage renforc√©, etc.), je reste bien s√ªr disponible pour vous √©tablir un devis rapide.

Bien cordialement,

{VOTRE_NOM}
{VOTRE_STRUCTURE}
{VOS_COORDONNEES}`
      },
      {
        id: 'demande-avis-1',
        name: 'Demande d‚Äôavis / t√©moignage client',
        category: 'Client',
        subject: 'Votre avis sur notre prestation de nettoyage',
        body:
`Bonjour {CIVILITE} {NOM_CLIENT},

Nous vous remercions de la confiance que vous nous accordez pour la prestation de nettoyage de {NOM_SITE}.

Votre avis est pr√©cieux pour nous permettre de continuer √† am√©liorer la qualit√© de nos services.
Si vous le souhaitez, vous pouvez prendre quelques minutes pour nous faire un retour :

‚Ä¢ Par retour de mail (points positifs, points √† am√©liorer)
‚Ä¢ Ou en laissant un avis sur {PLATEFORME_AVIS} : {LIEN_AVIS}

Merci d‚Äôavance pour votre contribution, c‚Äôest tr√®s pr√©cieux pour une petite structure comme la n√¥tre.

Bien cordialement,

{VOTRE_NOM}
{VOTRE_STRUCTURE}
{VOS_COORDONNEES}`
      }
    ];

    let templates = [];
    let selectedId = null;
    let toastTimeout = null;

    const templateListEl = document.getElementById('templateList');
    const searchInputEl = document.getElementById('searchInput');
    const filterCategoryEl = document.getElementById('filterCategory');
    const fieldNameEl = document.getElementById('fieldName');
    const fieldCategoryEl = document.getElementById('fieldCategory');
    const fieldSubjectEl = document.getElementById('fieldSubject');
    const fieldBodyEl = document.getElementById('fieldBody');
    const editorHintEl = document.getElementById('editorHint');
    const statusTextEl = document.getElementById('statusText');
    const countTextEl = document.getElementById('countText');

    const btnNewTemplate = document.getElementById('btnNewTemplate');
    const btnSave = document.getElementById('btnSave');
    const btnReset = document.getElementById('btnReset');
    const btnDuplicate = document.getElementById('btnDuplicate');
    const btnDelete = document.getElementById('btnDelete');
    const btnCopySubject = document.getElementById('btnCopySubject');
    const btnCopyBody = document.getElementById('btnCopyBody');
    const btnCopyAll = document.getElementById('btnCopyAll');

    const toastEl = document.getElementById('toast');
    const toastMessageEl = document.getElementById('toastMessage');
    const variablesListEl = document.getElementById('variablesList');

    function showToast(message) {
      toastMessageEl.textContent = message;
      toastEl.classList.add('visible');
      if (toastTimeout) clearTimeout(toastTimeout);
      toastTimeout = setTimeout(() => {
        toastEl.classList.remove('visible');
      }, 1800);
    }

    function saveToStorage() {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(templates));
      } catch (e) {
        console.warn('Impossible de sauvegarder dans le localStorage', e);
      }
    }

    function loadFromStorage() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) {
          templates = [...defaultTemplates];
          saveToStorage();
        } else {
          const parsed = JSON.parse(raw);
          if (Array.isArray(parsed) && parsed.length) {
            templates = parsed;
          } else {
            templates = [...defaultTemplates];
          }
        }
      } catch (e) {
        console.warn('Erreur de lecture localStorage, utilisation des mod√®les par d√©faut', e);
        templates = [...defaultTemplates];
      }
    }

    function renderTemplateList() {
      templateListEl.innerHTML = '';
      const searchTerm = searchInputEl.value.trim().toLowerCase();
      const categoryFilter = filterCategoryEl.value;

      let filtered = templates.filter(t => {
        const matchesCategory = categoryFilter === 'all' || t.category === categoryFilter;
        const text = (t.name + ' ' + t.subject + ' ' + t.body).toLowerCase();
        const matchesSearch = !searchTerm || text.includes(searchTerm);
        return matchesCategory && matchesSearch;
      });

      if (!filtered.length) {
        const emptyDiv = document.createElement('div');
        emptyDiv.style.fontSize = '0.8rem';
        emptyDiv.style.color = '#6b7280';
        emptyDiv.style.padding = '6px 2px';
        emptyDiv.textContent = 'Aucun mod√®le pour ce filtre. Cr√©e-en un avec ‚ÄúNouveau mod√®le‚Äù.';
        templateListEl.appendChild(emptyDiv);
      } else {
        filtered.forEach(t => {
          const item = document.createElement('div');
          item.className = 'template-item' + (t.id === selectedId ? ' selected' : '');
          item.dataset.id = t.id;

          const nameRow = document.createElement('div');
          nameRow.className = 'template-name-row';
          const nameEl = document.createElement('div');
          nameEl.className = 'template-name';
          nameEl.textContent = t.name || '(Sans nom)';
          const catEl = document.createElement('div');
          catEl.className = 'template-category';
          catEl.textContent = t.category;
          nameRow.appendChild(nameEl);
          nameRow.appendChild(catEl);

          const subjEl = document.createElement('div');
          subjEl.className = 'template-subject';
          subjEl.textContent = t.subject || '(Sans objet)';

          const metaEl = document.createElement('div');
          metaEl.className = 'template-meta';
          const length = (t.body || '').length;
          const lines = (t.body || '').split(/\r?\n/).length;
          const lengthText = `${length} car. ¬∑ ${lines} ligne${lines > 1 ? 's' : ''}`;
          metaEl.innerHTML = `<span>${lengthText}</span><span class="pill-mini">Clique pour √©diter</span>`;

          item.appendChild(nameRow);
          item.appendChild(subjEl);
          item.appendChild(metaEl);

          item.addEventListener('click', () => {
            selectTemplate(t.id);
          });

          templateListEl.appendChild(item);
        });
      }

      const count = templates.length;
      countTextEl.textContent = count === 0 ? '0 mod√®le' : `${count} mod√®le${count > 1 ? 's' : ''}`;
    }

    function selectTemplate(id) {
      const t = templates.find(t => t.id === id);
      if (!t) return;

      selectedId = id;
      fieldNameEl.value = t.name || '';
      fieldCategoryEl.value = t.category || 'Autre';
      fieldSubjectEl.value = t.subject || '';
      fieldBodyEl.value = t.body || '';

      editorHintEl.textContent = 'Mod√®le charg√©. Tu peux modifier, dupliquer, ou copier le texte.';
      statusTextEl.textContent = 'Mod√®le s√©lectionn√© : ' + (t.name || '(Sans nom)');

      btnDuplicate.disabled = false;
      btnDelete.disabled = false;

      renderTemplateList();
    }

    function clearForm() {
      selectedId = null;
      fieldNameEl.value = '';
      fieldCategoryEl.value = 'Client';
      fieldSubjectEl.value = '';
      fieldBodyEl.value = '';

      editorHintEl.textContent = 'Nouveau mod√®le : remplis les champs et clique sur ‚ÄúEnregistrer le mod√®le‚Äù.';
      statusTextEl.textContent = 'Aucun mod√®le s√©lectionn√©.';
      btnDuplicate.disabled = true;
      btnDelete.disabled = true;

      renderTemplateList();
    }

    function handleSave() {
      const name = fieldNameEl.value.trim();
      const category = fieldCategoryEl.value;
      const subject = fieldSubjectEl.value.trim();
      const body = fieldBodyEl.value.trim();

      if (!name && !subject && !body) {
        showToast('Rien √† enregistrer, le mod√®le est vide.');
        return;
      }

      if (!name) {
        showToast('Ajoute au moins un nom de mod√®le pour le retrouver facilement.');
        return;
      }

      if (selectedId) {
        const idx = templates.findIndex(t => t.id === selectedId);
        if (idx !== -1) {
          templates[idx] = { ...templates[idx], name, category, subject, body };
        }
      } else {
        const newId = 'tpl-' + Date.now().toString(36);
        templates.push({ id: newId, name, category, subject, body });
        selectedId = newId;
      }

      saveToStorage();
      renderTemplateList();
      editorHintEl.textContent = 'Mod√®le enregistr√©. Tu peux maintenant le copier ou le dupliquer.';
      statusTextEl.textContent = 'Mod√®le s√©lectionn√© : ' + name;
      btnDuplicate.disabled = false;
      btnDelete.disabled = false;
      showToast('Mod√®le enregistr√© ‚úÖ');
    }

    function handleDuplicate() {
      if (!selectedId) return;
      const original = templates.find(t => t.id === selectedId);
      if (!original) return;

      const copy = {
        ...original,
        id: 'tpl-' + Date.now().toString(36),
        name: original.name + ' (copie)'
      };
      templates.push(copy);
      saveToStorage();
      selectTemplate(copy.id);
      showToast('Mod√®le dupliqu√©');
    }

    function handleDelete() {
      if (!selectedId) return;
      const t = templates.find(t => t.id === selectedId);
      const label = t ? t.name : '';

      const confirmMsg = label
        ? `Supprimer le mod√®le ¬´ ${label} ¬ª ?`
        : 'Supprimer ce mod√®le ?';

      if (!confirm(confirmMsg)) return;

      templates = templates.filter(t => t.id !== selectedId);
      selectedId = null;
      saveToStorage();
      clearForm();
      showToast('Mod√®le supprim√©');
    }

    function copyToClipboard(text, message) {
      if (!text) {
        showToast('Rien √† copier, le champ est vide.');
        return;
      }
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(text).then(() => {
          showToast(message);
        }).catch(() => {
          fallbackCopyText(text, message);
        });
      } else {
        fallbackCopyText(text, message);
      }
    }

    function fallbackCopyText(text, message) {
      const textarea = document.createElement('textarea');
      textarea.value = text;
      textarea.style.position = 'fixed';
      textarea.style.left = '-9999px';
      document.body.appendChild(textarea);
      textarea.select();
      try {
        document.execCommand('copy');
        showToast(message);
      } catch (e) {
        alert('Impossible de copier automatiquement. Tu peux copier manuellement dans le champ.');
      } finally {
        document.body.removeChild(textarea);
      }
    }

    function handleCopySubject() {
      const subject = fieldSubjectEl.value;
      copyToClipboard(subject, 'Objet copi√© ‚úâÔ∏è');
    }

    function handleCopyBody() {
      const body = fieldBodyEl.value;
      copyToClipboard(body, 'Message copi√© üìã');
    }

    function handleCopyAll() {
      const subject = fieldSubjectEl.value.trim();
      const body = fieldBodyEl.value.trim();

      if (!subject && !body) {
        showToast('Rien √† copier, le mod√®le est vide.');
        return;
      }

      const full = subject
        ? `Objet : ${subject}\n\n${body}`
        : body;

      copyToClipboard(full, 'E-mail complet copi√© ‚ö°');
    }

    function handleInsertVariable(e) {
      const btn = e.target.closest('.var-tag');
      if (!btn) return;
      const variable = btn.getAttribute('data-var');
      if (!variable) return;

      const textarea = fieldBodyEl;
      const start = textarea.selectionStart;
      const end = textarea.selectionEnd;
      const value = textarea.value;
      textarea.value = value.slice(0, start) + variable + value.slice(end);
      textarea.focus();
      const caret = start + variable.length;
      textarea.setSelectionRange(caret, caret);
    }

    document.addEventListener('DOMContentLoaded', () => {
      loadFromStorage();
      renderTemplateList();

      btnNewTemplate.addEventListener('click', clearForm);
      btnSave.addEventListener('click', handleSave);
      btnReset.addEventListener('click', () => {
        fieldNameEl.value = '';
        fieldSubjectEl.value = '';
        fieldBodyEl.value = '';
        fieldCategoryEl.value = 'Client';
        statusTextEl.textContent = selectedId
          ? 'Mod√®le s√©lectionn√©, formulaire r√©initialis√© (non enregistr√©).'
          : 'Formulaire vierge. Remplis et enregistre pour cr√©er un mod√®le.';
        showToast('Formulaire effac√©');
      });

      btnDuplicate.addEventListener('click', handleDuplicate);
      btnDelete.addEventListener('click', handleDelete);

      searchInputEl.addEventListener('input', renderTemplateList);
      filterCategoryEl.addEventListener('change', renderTemplateList);

      btnCopySubject.addEventListener('click', handleCopySubject);
      btnCopyBody.addEventListener('click', handleCopyBody);
      btnCopyAll.addEventListener('click', handleCopyAll);

      variablesListEl.addEventListener('click', handleInsertVariable);
    });
  </script>
</body>
</html>
